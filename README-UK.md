# üí≥ wayforpay-ts-integration

![Package version](https://img.shields.io/npm/v/wayforpay-ts-integration)
![MIT License](https://img.shields.io/badge/license-ISC-green.svg)

wayforpay-ts-integration ‚Äî TypeScript SDK –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ –ø–ª–∞—Ç—ñ–∂–Ω–æ—é —Å–∏—Å—Ç–µ–º–æ—é Wayforpay. –ü–∞–∫–µ—Ç –∑–∞–±–µ–∑–ø–µ—á—É—î –ø—Ä–æ—Å—Ç–∏–π –¥–æ—Å—Ç—É–ø –¥–æ API Wayforpay –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –ø–ª–∞—Ç–µ–∂—ñ–≤, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞—Ç—ñ–∂–Ω–∏—Ö —Ñ–æ—Ä–º, —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π. 

üá¨üáß [English README.md](/README.md)

```bash
npm i wayforpay-ts-integration
```

## ‚ú® Features

- [X] –ü–ª–∞—Ç–µ–∂—ñ
- [–•] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –æ–ø–ª–∞—Ç–∏
- [ ] –û–ø–ª–∞—Ç–∞ –≤ –æ–¥–∏–Ω –∫–ª—ñ–∫
- [ ] –ü–ª–∞—Ç—ñ–∂–Ω–∏–π –≤—ñ–¥–∂–µ—Ç
- [ ] –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–∞—Ä—Ç–∫–∏ (Verify)
- [ ] –í–∏—Å—Ç–∞–≤–ª–µ–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—ñ–≤ (Invoice)
- [ ] –ü–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –∫–∞—Ä—Ç —Ñ—ñ–∑. –æ—Å—ñ–± (Account2card)
- [ ] –ü–µ—Ä–µ–∫–∞–∑ –∫–æ—à—Ç—ñ–≤ –Ω–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–∏–π —Ä–∞—Ö—É–Ω–æ–∫ (Account2account)
- [X] API –û—Ç—Ä–∏–º–∞–Ω–Ω—è –°–ø–∏—Å–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- [ ] –û–Ω–ª–∞–π–Ω –∫—Ä–µ–¥–∏—Ç—É–≤–∞–Ω–Ω—è
- [ ] –û–Ω–ª–∞–π–Ω –æ–ø–ª–∞—Ç–∞ —Ç–∞–∫—Å—ñ
- [ ] –ê–Ω—Ç–∏—Ñ—Ä–æ–¥ API
- [X] –†–µ–≥—É–ª—è—Ä–Ω—ñ –ø–ª–∞—Ç–µ–∂—ñ
- [ ] –ü–ª–∞—Ç—ñ–∂–Ω—ñ –º–æ–¥—É–ª—ñ –ø—ñ–¥ CMS
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞–≥–∞–∑–∏–Ω—É/–ø–∞—Ä—Ç–Ω–µ—Ä–∞
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞—Ç—ñ–∂–Ω–æ–≥–æ QR-–∫–æ–¥—É
- [ ] PCI DSS
- [ ] –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫—É—Ä—Å—ñ–≤ –≤–∞–ª—é—Ç

![checkout-demo](https://github.com/user-attachments/assets/5ceb9ac8-dcf5-4413-8ad8-9a6ffa1356dc)

## üöÄ –ó–º—ñ—Å—Ç

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞–≥–∞–∑–∏–Ω—É –≤ Wayforpay
- –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞–∫–µ—Ç—É
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
    - –ü–ª–∞—Ç–µ–∂—ñ
    - –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π

## üè™ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞–≥–∞–∑–∏–Ω—É –≤ Wayforpay

–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ Wayforpay —á–µ—Ä–µ–∑ [–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π —Å–∞–π—Ç](https://m.wayforpay.com/account/site/login).

–ü—ñ—Å–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó, —É –±–æ–∫–æ–≤–æ–º—É –º–µ–Ω—é –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ —Ä–æ–∑–¥—ñ–ª—É **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–∞–≥–∞–∑–∏–Ω—É**. –í–∏ –ø–æ–±–∞—á–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö –º–∞–≥–∞–∑–∏–Ω—ñ–≤.
–Ø–∫—â–æ –º–∞–≥–∞–∑–∏–Ω—É —â–µ –Ω–µ–º–∞—î, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **–°—Ç–≤–æ—Ä–∏—Ç–∏ –º–∞–≥–∞–∑–∏–Ω**. –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤–∫–∞–∑–∞—Ç–∏ –¥–æ–º–µ–Ω –º–∞–≥–∞–∑–∏–Ω—É. –Ø–∫—â–æ –≤–∏ —â–µ –Ω–µ –≤–∏–∑–Ω–∞—á–∏–ª–∏—Å—å –∑
–¥–æ–º–µ–Ω–æ–º, –≤–≤–µ–¥—ñ—Ç—å —Ç–∏–º—á–∞—Å–æ–≤–∏–π.

### üîë Token

–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞–≥–∞–∑–∏–Ω—É –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –π–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å. –¢–∞–º –∑–Ω–∞–π–¥—ñ—Ç—å –∫–∞—Ä—Ç–∫—É –∑ **–†–µ–∫–≤—ñ–∑–∏—Ç–∞–º–∏ –º–µ—Ä—á–∞–Ω—Ç–∞**, –¥–µ –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ *
*Merchant login** —Ç–∞ **Merchant secret key**. –¶—ñ –¥–∞–Ω—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∫–∞–∑–∞—Ç–∏ –≤ –æ–ø—Ü—ñ—è—Ö –∫–ª–∞—Å—É `Wayforpay` –∞–±–æ –¥–æ–¥–∞—Ç–∏ –¥–æ —Ñ–∞–π–ª—É
`.env` —É –∫–æ—Ä–µ–Ω–µ–≤—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –≤–∞—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É.

- `DOMAIN` ‚Äî –¥–æ–º–µ–Ω –≤–∞—à–æ–≥–æ Wayforpay –º–∞–≥–∞–∑–∏–Ω—É
- `MERCHANT_LOGIN` ‚Äî –ª–æ–≥—ñ–Ω –º–µ—Ä—á–∞–Ω—Ç–∞ –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –º–∞–≥–∞–∑–∏–Ω—É
- `MERCHANT_SECRET_KEY` ‚Äî —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á –º–µ—Ä—á–∞–Ω—Ç–∞ –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –º–∞–≥–∞–∑–∏–Ω—É

> [!CAUTION]
> **–ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ** –º–µ—Ç–æ–¥–∏ —Ü—å–æ–≥–æ –ø–∞–∫–µ—Ç—É –Ω–∞ –∫–ª—ñ—î–Ω—Ç—Å—å–∫—ñ–π —Å—Ç–æ—Ä–æ–Ω—ñ. –¶–µ –º–æ–∂–µ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç—É–≤–∞—Ç–∏ –≤–∞—à —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á.
> –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –ª–∏—à–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É –≤–∞—à–æ–º—É API).

[–ü—Ä–∏–∫–ª–∞–¥ —Ñ–∞–π–ª—É .env](https://github.com/Wlad1slav/wayforpay-ts-integration/blob/main/packages/backend/.env.example)

### üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞–∫–µ—Ç—É

–ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–∞–≥–∞–∑–∏–Ω—É, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å npm –ø–∞–∫–µ—Ç –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä Node.js:

```bash
npm i wayforpay-ts-integration
```

## üõ† –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### üìù –ü–ª–∞—Ç–µ–∂—ñ

–î–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—ñ–≤, Wayforpay –ø—Ä–∏–π–º–∞—î —Ç—ñ–ª—å–∫–∏ –ø—Ä–æ—Å—Ç—ñ HTTP –∑–∞–ø–∏—Ç–∏ –∑ –º–µ—Ç–æ–¥–æ–º POST —Ç–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º –ø—ñ–¥–ø–∏—Å–æ–º –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ. –¢–µ,
—è–∫ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ø—ñ–¥–ø–∏—Å —Ç–∞ —è–∫–∞ —Å–∞–º–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∞ —Ñ–æ—Ä–º–∞ –≤–∞–º –∑–Ω–∞—Ç–∏ –Ω–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏, –±–æ —Ü–µ –≤—Å–µ –≤–∫–ª—é—á–µ–Ω–æ –≤ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª —Ü—å–æ–≥–æ –ø–∞–∫–µ—Ç—É.

–í—Å–µ —â–æ –≤–∞–º –≤–∞—Ä—Ç–æ –∑–Ω–∞—Ç–∏:

1. –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ä–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä,
2. –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ —á–µ—Ä–µ–∑ –Ω–∞—à –ø–∞–∫–µ—Ç –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è HTML —Ñ–æ—Ä–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–æ—à–∏–∫–∞ –∫–ª—ñ—î–Ω—Ç–∞,
3. –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∞ —Ñ–æ—Ä–º–∞ –∑ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º –ø—ñ–¥–ø–∏—Å–æ–º –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –Ω–∞–∑–∞–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É,
4. –≤–∏ –Ω–∞ –∫–ª—ñ—î–Ω—Ç—Å—å–∫—ñ–π —á–∞—Å—Ç–∏–Ω—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ–Ω—É—î—Ç–µ —Ñ–æ—Ä–º—É –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ê–ë–û –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ —Ü—ñ—î—é —Ñ–æ—Ä–º–æ—é —Ç–∞ —Å–∫—Ä–∏–ø—Ç–æ–º –¥–ª—è —ó—ó –≤–∏–∫–æ–Ω–∞–Ω–Ω—è,
5. –ø—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–µ—Ä–µ–¥–∞–Ω–æ—ó —Ñ–æ—Ä–º–∏ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É Wayforpay, –¥–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –æ–ø–ª–∞—Ç–∞ –∑–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.

–í –∫–ª–∞—Å `Wayforpay` –≤–∏ –≤–∫–∞–∑—É—î—Ç–µ –¥–∞–Ω—ñ –≤–∞—à–æ–≥–æ –º–µ—Ä—á–∞–Ω—Ç–∞. –ú–µ—Ç–æ–¥ `createForm` —Å—Ç–≤–æ—Ä—é—î HTML-—Ñ–æ—Ä–º—É –¥–ª—è –æ–ø–ª–∞—Ç–∏, —è–∫—É –≤–∞–º —Ç—Ä–µ–±–∞
–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –Ω–∞ –∫–ª—ñ—î–Ω—Ç—Å—å–∫—ñ–π —á–∞—Å—Ç–∏–Ω—ñ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

–ü–µ—Ä—à–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî —Ü–µ –∫–æ—à–∏–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞. –ü–∞—Ä–∞–º–µ—Ç—Ä–æ–º –ø–æ–≤–∏–Ω–µ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏—Å—è –º–∞—Å–∏–≤ –æ–±'—î–∫—Ç—ñ–≤ –∑ —Ç–∏–ø–æ–º `TCartElement`.

| Property        | Type   | –û–ø–∏—Å                      |
|-----------------|--------|---------------------------|
| `quantity`      | number | –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—É –≤ –∫–æ—à–∏–∫—É |
| `product`       | object | –î–µ—Ç–∞–ª—ñ —Ç–æ–≤–∞—Ä—É             |
| `product.name`  | string | –ù–∞–∑–≤–∞ –ø—Ä–æ–¥—É–∫—Ç—É            |
| `product.price` | number | –¶—ñ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—É             |

–î—Ä—É–≥–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî —Ü–µ –æ–±'—î–∫—Ç –∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é, –≤ —è–∫—É –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ –±—É–¥—å-—è–∫–µ
–ø–æ–ª–µ, [—â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è Wayforpay](https://wiki.wayforpay.com/view/852102).

```typescript
import {Wayforpay, TCartElement} from "wayforpay-ts-integration";

const wayforpay = new Wayforpay({
    merchantLogin: 'test_merch_n1',
    merchantSecret: 'flk3409refn54t54t*FNJRET',
    domain: 'www.market.ua',
});

const form = await wayforpay.createForm(cart as TCartElement[], {
    currency: 'UAH'
});
```

#### –î–æ–¥–∞—Ç–∫–æ–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- https://wiki.wayforpay.com/view/852102

#### POST –ø—Ä–∏–∫–ª–∞–¥

```typescript
import {Wayforpay, TCartElement, TProduct, TUserCartElement} from "wayforpay-ts-integration";

const products: TProduct[] = [
    {id: '1', name: "Example product 1", price: 100},
    {id: '2', name: "Example product 2", price: 15},
    {id: '3', name: "Example product 3", price: 700},
    {id: '4', name: "Example product 4", price: 80},
    {id: '5', name: "Example product 5", price: 300},
];

app.post('/api/wayforpay/checkout', async (req: Request, res: Response) => {
    const {userCart}: {
        userCart: TUserCartElement[];
    } = req.body;

    if (userCart && userCart.length > 0) {
        const cart = userCart.map(item => {
            const product = products.find(product => product.id === item.id);
            if (product) {
                return {
                    quantity: item.quantity,
                    product
                } as TCartElement;
            } else {
                console.error(`Product with ID ${item.id} does not exist`);
                return null;  // Return null for invalid products
            }
        }).filter(Boolean);  // Filter out null values from the array

        const wayforpay = new Wayforpay({
            merchantLogin: process.env.MERCHANT_LOGIN as string,
            merchantSecret: process.env.MERCHANT_SECRET_KEY as string,
            domain: process.env.DOMAIN as string,
        });

        // Creates a form for a request to wayforpay
        const form = await wayforpay.createForm(cart as TCartElement[], {
            currency: 'UAH',
            deliveryList: ["nova", "other"],
        });

        return res.send(form);
    } else {
        console.error('No product IDs were specified');
    }
});
```

–ù–∞ –∫–ª—ñ—î–Ω—Ç—Å—å–∫—ñ–π —Å—Ç–æ—Ä–æ–Ω—ñ —Ñ–æ—Ä–º—É –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç–∏ –≤ DOM —ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏. –û—Å—å –ø—Ä–∏–∫–ª–∞–¥ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —è–∫–∏–π
–ø–µ—Ä–µ–∫–∏–¥–∞—î –∫–ª—ñ—î–Ω—Ç–∞ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –æ–ø–ª–∞—Ç–∏ –ø—Ä–∏ –Ω–∞—Ç–∏—Å–Ω–µ–Ω–Ω—ñ –∫–Ω–æ–ø–∫–∏:

```tsx
import axios from "axios";

function GoToPaymentButton() {
    const cart = [
        {id: '1', quantity: 1},
        {id: '4', quantity: 7},
    ];

    const handleGoToPay = async () => {
        // Here is the domain of your server and the route by which the form is received
        const response = await axios.post('http://localhost:3000/api/wayforpay/checkout', {
            userCart: cart
        });

        // Gets form's HTML from the backend
        const html = await response.data;

        // Check if the container already exists, if not, create it
        let handlePay = document.getElementById('handlePay');
        if (!handlePay) {
            handlePay = document.createElement('div');
            handlePay.id = 'handlePay';
            document.body.appendChild(handlePay);
        }

        // Add the form's HTML to the container
        handlePay.innerHTML = html;

        // Find and submit the form
        const form = document.getElementById('wayforpayForm') as HTMLFormElement;
        if (form) {
            form.submit(); // Completes the form
        }
    };

    return <button onClick={handleGoToPay} type="button">Go to payment</button>;
}
```

#### GET –ø—Ä–∏–∫–ª–∞–¥

–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ¬†—É–Ω–∏–∫–∞—Ç–∏ –∑–∞–π–≤–∏—Ö POST –∑–∞–ø–∏—Ç—ñ–≤, —Ç–æ –≤–∏ –º–æ–∂–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏ —Ä–µ–¥—ñ—Ä–µ–∫—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ —Ü—ñ—î—é —Ñ–æ—Ä–º–æ—é. –ü–∞–∫–µ—Ç –≤–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—î –≤ —Ñ–æ—Ä–º—É —Å–∫—Ä–∏–ø—Ç –¥–ª—è —ó—ó –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, —Ç–æ–º—É –≤—Å–µ —â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ - —Å—Ç–≤–æ—Ä–∏—Ç–∏ GET –ê–ü–Ü –º–∞—Ä—à—Ä—É—Ç –ø–æ —è–∫–æ–º—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–∞–¥–∞–Ω–∏—Ö –≤ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –±—É–¥–µ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏—Å—è —Ñ–æ—Ä–º–∞ —Ç–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞ —Ü–µ–π –º–∞—Ä—à—Ä—É—Ç.¬†

##### Next.js 14 –∑ app router
```typescript
import {NextRequest, NextResponse} from "next/server";
import {TCartElement, TRequestPayment, TWayforpayAvailableCurrency, Wayforpay} from "wayforpay-ts-integration";
import {decrypt} from "@/lib/secret";
import { hookMerchant } from "@/lib/api-hooks";

export async function GET(request: NextRequest) {
    const merchant = await hookMerchant('Wayforpay');
    if (!merchant)
        return NextResponse.json({message: 'This merchant does not exist'}, {status: 400});

    const merchantData = merchant.data as {
        merchantLogin: string;
        domain: string;
    };

    const options = await hookOptions('Wayforpay');

    let optionsData: {
        currency: TWayforpayAvailableCurrency,
        [key: string]: string
    } = { currency: 'USD' };

    for (const option of options) {
        optionsData[option.key] = option.value;
    }

    const wfp = new Wayforpay({
        merchantLogin: merchantData.merchantLogin,
        merchantSecret: decrypt(merchant.secret),
        domain: merchantData.domain,
    });

    const {searchParams} = new URL(request.url);
    const productId = searchParams.get('id');

    if (!productId)
        return NextResponse.json({message: 'No required parameters found'}, {status: 400});

    const product = await hookProduct(productId);

    const cart: TCartElement[] = [product];

    const form = await wfp.createForm(cart, optionsData as TRequestPayment);

    return new Response(form, {
        headers: { 'Content-Type': 'text/html' }
    });
}
```

–î–∞–ª—ñ –≤–∏—Å—Ç–∞—á–∏—Ç—å –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞ —Ü–µ–π –ê–ü–Ü. –ù–∞–ø—Ä–∏–∫–ª–∞–¥ `window.location.href = 'https://example.com/api/public/v1/wayforpay?id=12';`.


### üìã –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
–ó–∞–ø–∏—Ç –Ω–∞ –ø–µ—Ä–µ–ª—ñ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –º–∞–≥–∞–∑–∏–Ω—É –∑–∞ –ø–µ–≤–Ω–∏–π –ø–µ—Ä—ñ–æ–¥ —á–∞—Å—É.

–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –ø–µ—Ä—ñ–æ–¥ –∑–∞ —è–∫–∏–π –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–∏–π–º–∞—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó, —Å—Ç–∞–Ω–æ–≤–∏—Ç—å 31 –¥–µ–Ω—å.

#### –î–æ–¥–∞—Ç–∫–æ–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- https://wiki.wayforpay.com/view/1736786

```typescript
const wayforpay = new Wayforpay({
    merchantLogin: 'test_merch_n1',
    merchantSecret: 'flk3409refn54t54t*FNJRET',
    domain: 'www.market.ua',
});

const response = await wayforpay.getTransactions();
const transactions = response.data;
```

### üìã –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂—É

–ú–µ—Ç–æ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å—É –ø–ª–∞—Ç–µ–∂—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `orderReference`.

> [!NOTE]  
> –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —Ü—å–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É —Ä–æ–∑–≥–ª—è–¥–∞—î—Ç—å—Å—è —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω—É. –î–ª—è —Ü—å–æ–≥–æ –∑–≤‚Äô—è–∂—ñ—Ç—å—Å—è –∑ sales@wayforpay.com, –≤–∫–∞–∑–∞–≤—à–∏ merchant login, –æ–ø–∏—à—ñ—Ç—å —Å–∏—Ç—É–∞—Ü—ñ—é —Ç–∞ –∑–∞–∑–Ω–∞—á—Ç–µ, —â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω `MerchantPassword`.

#### –î–æ–¥–∞—Ç–∫–æ–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- https://wiki.wayforpay.com/view/852526

```typescript
const status = await wayforpay.checkRegularPayment(orderReference, merchantPassword);
```

## –ö–æ–Ω—Ç—Ä–∏–±'—é—Ç–∏–Ω–≥

–í—ñ—Ç–∞—é –≤–Ω–µ—Å–æ–∫ –≤—ñ–¥ —É—Å—ñ—Ö. 

### –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è

–ó—Ä–æ–±—ñ—Ç—å —Ñ–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π

```bash
git clone https://github.com/Wlad1slav/wayforpay-ts-integration.git
```

–°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤—É –≥—ñ–ª–∫—É

```bash
git checkout -b feature/–Ω–∞–∑–≤–∞-—Ñ—É–Ω–∫—Ü—ñ—ó
```

–í–Ω–µ—Å—ñ—Ç—å –∑–º—ñ–Ω–∏

–ó–∞–∫–æ–º—ñ—Ç—å—Ç–µ –∑–º—ñ–Ω–∏

```bash
git commit -m "feat: –æ–ø–∏—Å –≤–∞—à–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó"
```

–ó–∞–ø—É—à—Ç–µ –∑–º—ñ–Ω–∏

```bash
git push origin feature/–Ω–∞–∑–≤–∞-—Ñ—É–Ω–∫—Ü—ñ—ó
```

## –ê–≤—Ç–æ—Ä

[@Wlad1slav](https://github.com/Wlad1slav)

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

ISC
